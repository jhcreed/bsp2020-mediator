knitr::opts_chunk$set(
fig.width = 10, fig.height = 6, fig.retina = 2,
warning = FALSE, message = FALSE
)
devtools::install_github("gadenbuie/xaringanExtra")
emo::ji("poop")
devtools::install_github("hadley/emo")
43.46+21.57+8.95+23.01+15.34
112.33+150+1437.21
2140.39-1699.54
112.33/2
library(mediator)
library(tidyverse)
library(survival)
load("~/Documents/github/TCGAclinical/data/clinical_survival_pancancer_atlas.RData")
dat %>%
filter(acronym == "PAAD") %>%
mutate(ever_smoker = case_when(
tobacco_smoking_history == "Lifelong Non-smoker" ~ 0,
tobacco_smoking_history == "Current reformed smoker for < or = 15 years" ~ 1,
tobacco_smoking_history == "Current reformed smoker for > 15 years" ~ 1,
tobacco_smoking_history == "Current Reformed Smoker, Duration Not Specified" ~ 1,
tobacco_smoking_history == "Current smoker" ~ 1,
TRUE ~ NA_real_
)) %>%
mutate(gender_binary = case_when(
gender == "MALE" ~ 1,
gender == "FEMALE" ~ 0
)) %>%
mutate(histological_grade = case_when(
histological_grade == "GX" ~ NA_character_,
TRUE ~ histological_grade
)) %>%
mutate(pack_yr = case_when(
ever_smoker == 0 ~ 0,
ever_smoker == 1 ~ number_pack_years_smoked,
TRUE  ~ number_pack_years_smoked
)) %>%
mutate(diab = case_when(
history_of_diabetes == "[Not Available]" ~ NA_character_,
history_of_diabetes == "[Unknown]" ~ NA_character_,
TRUE ~ history_of_diabetes
)) %>%
mediator(out.model = coxph(Surv(OS.time,OS) ~ gender_binary + ever_smoker +
age_at_initial_pathologic_diagnosis +
histological_grade + gender_binary*ever_smoker,
data = for_analysis),
med.model = glm(ever_smoker ~ gender_binary +
age_at_initial_pathologic_diagnosis + histological_grade,
data = for_analysis, family = "binomial"),
treat = "gender_binary", mediator = "ever_smoker",
out.reg = "coxph", med.reg = "logistic")
load("~/Documents/github/TCGAclinical/data/clinical_survival_pancancer_atlas.RData")
dat %>%
filter(acronym == "PAAD") %>%
mutate(ever_smoker = case_when(
tobacco_smoking_history == "Lifelong Non-smoker" ~ 0,
tobacco_smoking_history == "Current reformed smoker for < or = 15 years" ~ 1,
tobacco_smoking_history == "Current reformed smoker for > 15 years" ~ 1,
tobacco_smoking_history == "Current Reformed Smoker, Duration Not Specified" ~ 1,
tobacco_smoking_history == "Current smoker" ~ 1,
TRUE ~ NA_real_
)) %>%
mutate(gender_binary = case_when(
gender == "MALE" ~ 1,
gender == "FEMALE" ~ 0
)) %>%
mutate(histological_grade = case_when(
histological_grade == "GX" ~ NA_character_,
TRUE ~ histological_grade
)) %>%
mutate(pack_yr = case_when(
ever_smoker == 0 ~ 0,
ever_smoker == 1 ~ number_pack_years_smoked,
TRUE  ~ number_pack_years_smoked
)) %>%
mutate(diab = case_when(
history_of_diabetes == "[Not Available]" ~ NA_character_,
history_of_diabetes == "[Unknown]" ~ NA_character_,
TRUE ~ history_of_diabetes
)) %>%
mediator(out.model = coxph(Surv(OS.time,OS) ~ gender_binary + ever_smoker +
age_at_initial_pathologic_diagnosis +
histological_grade + gender_binary*ever_smoker,
data = for_analysis),
med.model = glm(ever_smoker ~ gender_binary +
age_at_initial_pathologic_diagnosis + histological_grade,
data = for_analysis, family = "binomial"),
treat = "gender_binary")
load("~/Documents/github/TCGAclinical/data/clinical_survival_pancancer_atlas.RData")
dat %>%
filter(acronym == "PAAD") %>%
mutate(ever_smoker = case_when(
tobacco_smoking_history == "Lifelong Non-smoker" ~ 0,
tobacco_smoking_history == "Current reformed smoker for < or = 15 years" ~ 1,
tobacco_smoking_history == "Current reformed smoker for > 15 years" ~ 1,
tobacco_smoking_history == "Current Reformed Smoker, Duration Not Specified" ~ 1,
tobacco_smoking_history == "Current smoker" ~ 1,
TRUE ~ NA_real_
)) %>%
mutate(gender_binary = case_when(
gender == "MALE" ~ 1,
gender == "FEMALE" ~ 0
)) %>%
mutate(histological_grade = case_when(
histological_grade == "GX" ~ NA_character_,
TRUE ~ histological_grade
)) %>%
mutate(pack_yr = case_when(
ever_smoker == 0 ~ 0,
ever_smoker == 1 ~ number_pack_years_smoked,
TRUE  ~ number_pack_years_smoked
)) %>%
mutate(diab = case_when(
history_of_diabetes == "[Not Available]" ~ NA_character_,
history_of_diabetes == "[Unknown]" ~ NA_character_,
TRUE ~ history_of_diabetes
)) %>%
mediator(out.model = coxph(Surv(OS.time,OS) ~ gender_binary + ever_smoker +
age_at_initial_pathologic_diagnosis +
histological_grade + gender_binary*ever_smoker,
data = dat),
med.model = glm(ever_smoker ~ gender_binary +
age_at_initial_pathologic_diagnosis + histological_grade,
data = dat, family = "binomial"),
treat = "gender_binary")
load("~/Documents/github/TCGAclinical/data/clinical_survival_pancancer_atlas.RData")
dat %>%
filter(acronym == "PAAD") %>%
mutate(ever_smoker = case_when(
tobacco_smoking_history == "Lifelong Non-smoker" ~ 0,
tobacco_smoking_history == "Current reformed smoker for < or = 15 years" ~ 1,
tobacco_smoking_history == "Current reformed smoker for > 15 years" ~ 1,
tobacco_smoking_history == "Current Reformed Smoker, Duration Not Specified" ~ 1,
tobacco_smoking_history == "Current smoker" ~ 1,
TRUE ~ NA_real_
)) %>%
mutate(gender_binary = case_when(
gender == "MALE" ~ 1,
gender == "FEMALE" ~ 0
)) %>%
mutate(histological_grade = case_when(
histological_grade == "GX" ~ NA_character_,
TRUE ~ histological_grade
)) %>%
mutate(pack_yr = case_when(
ever_smoker == 0 ~ 0,
ever_smoker == 1 ~ number_pack_years_smoked,
TRUE  ~ number_pack_years_smoked
)) %>%
mutate(diab = case_when(
history_of_diabetes == "[Not Available]" ~ NA_character_,
history_of_diabetes == "[Unknown]" ~ NA_character_,
TRUE ~ history_of_diabetes
)) %>%
mediator(out.model = coxph(Surv(OS.time,OS) ~ gender_binary + ever_smoker +
age_at_initial_pathologic_diagnosis +
histological_grade + gender_binary*ever_smoker,
data = .),
med.model = glm(ever_smoker ~ gender_binary +
age_at_initial_pathologic_diagnosis + histological_grade,
data = ., family = "binomial"),
treat = "gender_binary")
devtools::install_github("gerkelab/mediator")
?replace_na
library(kableExtra)
?row_spec
276.55/0.27
library(tidyverse)
178000*100
/70
17800000/70
178000/254285
14800000/70
1300*2
2600/700
